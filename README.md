# 🏛️ 古代神殿からの脱出 - RPG謎解きゲーム

古代の神殿に閉じ込められたあなた。謎を解いて脱出せよ！

## 🎮 ゲーム概要

プレイヤーは古代の神殿で目を覚まし、4つの部屋を巡りながら謎を解いて脱出を目指すRPG風謎解きアドベンチャーゲームです。

### 特徴

- 🧩 **4つのユニークなステージ**: 各部屋に異なる謎が待っています
- ⚔️ **RPG要素**: HP、知力、経験値を管理
- 🎒 **アイテム収集**: 謎を解いてアイテムを入手
- 💡 **ヒントシステム**: 困った時はヒントが使えます
- 💾 **自動セーブ**: 進行状況は自動的に保存されます
- 📱 **レスポンシブ**: スマホでもPCでもプレイ可能

## 📋 必要環境

- Python 3.8以上
- Flask 3.1.0
- Werkzeug 3.1.3

## 🚀 クイックスタート

```bash
# 1. リポジトリをクローン
git clone https://github.com/sakai-tomohiko124/tmhk-chat-server.git
cd tmhk-chat-server

# 2. 必要なパッケージをインストール
pip install -r requirements.txt

# 3. データベースを初期化
python3 init_game_db.py

# 4. ゲームサーバーを起動
python3 app.py

# 5. ブラウザでアクセス
# http://localhost:5000
```

## 🎯 ゲームの遊び方

### 新規登録
1. トップページから「冒険を始める」をクリック
2. 「Register」タブを選択
3. ユーザー名とパスワードを入力
4. 「Create Account」をクリック

### ゲームプレイ
1. イントロダクションを読む
2. 各ステージの謎を解く
3. 答えを入力して提出
4. 正解すると次のステージへ進める
5. 困ったらヒントボタンを使用

## 🗺️ ステージ一覧

### ステージ1: エントランスホール
- **謎**: 壁に刻まれた古代文字を解読
- **ヒント**: 太陽が昇る方向を考えよう

### ステージ2: 図書館
- **謎**: 本棚から正しい順序で本を選ぶ
- **ヒント**: 虹の色の順番

### ステージ3: 宝物庫
- **謎**: 数字パズルを解く
- **ヒント**: 部屋の四隅の数字に注目

### ステージ4: 最終の間
- **謎**: これまでの謎を組み合わせた総合問題
- **ヒント**: 最初のステージの答えが鍵

## 🛠️ 技術スタック

### Backend
- **Flask 3.1.0**: Pythonウェブフレームワーク
- **SQLite**: データベース
- **Werkzeug**: パスワードハッシュ化

### Frontend
- **HTML5/CSS3**: レスポンシブデザイン
- **JavaScript (Vanilla)**: ゲームロジック

### デザイン
- **カラースキーム**: ダークパープル & ゴールド
- **テーマ**: 古代神殿、ファンタジーRPG風

## 📁 プロジェクト構造

```
tmhk-chat-server/
├── app.py                     # メインアプリケーション
├── init_game_db.py           # データベース初期化
├── requirements.txt          # Python依存関係
├── .env.example             # 環境変数テンプレート
├── game.db                  # ゲームデータベース（自動生成）
│
├── templates/               # HTMLテンプレート
│   ├── index.html          # ランディングページ
│   ├── login.html          # ログイン/新規登録
│   ├── game_intro.html     # ストーリーイントロ
│   ├── game.html           # メインゲーム画面
│   └── game_complete.html  # ゲームクリア画面
│
└── static/                 # 静的ファイル
    ├── css/
    │   ├── game.css        # ゲーム専用スタイル
    │   ├── main_app.css    # 共通スタイル
    │   └── loading.css     # ローディングアニメーション
    └── js/
        └── game.js         # ゲームロジック
```

## 🗄️ データベース

### テーブル構成
- **players**: プレイヤー情報と進行状況
- **inventory**: 所持アイテム
- **game_progress**: ステージクリア状況
- **stages**: ステージ定義（4ステージ）
- **items**: アイテム定義（5種類）

## 🐛 トラブルシューティング

### データベースエラー
```bash
rm game.db
python3 init_game_db.py
```

### ポート5000が使用中
```bash
PORT=8000 python3 app.py
```

## 📝 開発情報

このプロジェクトは、既存のチャットサーバーアプリケーションをRPG風謎解きゲームに完全に変換したものです。

### 変更内容
- 50+ 依存パッケージ → 2パッケージのみ
- 複雑なチャット機能 → シンプルな謎解きゲーム
- Socket.IO/Redis → Flask + SQLiteのみ
- 60+ ファイル → 15コアファイル

## 📞 サポート

問題が発生した場合は、GitHubのIssuesで報告してください。

---

**楽しいゲームプレイを！** 🎮✨
