<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アンケート - TMHKchat</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
<div class="container my-4" style="max-width: 700px;">
    <a href="{{ url_for('main_app') }}" class="btn btn-secondary mb-4"><i class="bi bi-arrow-left"></i> 戻る</a>
    <div class="card">
        <div class="card-header">
            <h3>{{ survey.title }}</h3>
        </div>
        <div class="card-body">
            <p>{{ survey.description }}</p>
            <hr>

            <form action="{{ url_for('submit_survey') }}" method="POST">
                <input type="hidden" name="survey_id" value="{{ survey.id }}">
                {% for question in questions %}
                    <div class="form-group mb-4">
                        <label><strong>Q{{ loop.index }}. {{ question.question_text }}</strong></label>
                        
                        {% if question.question_type == 'multiple_choice' %}
                            {% for option in options[question.id] %}
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="question-{{ question.id }}-multiple_choice" id="option-{{ option.id }}" value="{{ option.id }}" required>
                                <label class="form-check-label" for="option-{{ option.id }}">
                                    {{ option.option_text }}
                                </label>
                            </div>
                            {% endfor %}
                        {% elif question.question_type == 'text' %}
                            <textarea name="question-{{ question.id }}-text" class="form-control" rows="3" placeholder="ご自由にお書きください"></textarea>
                        {% endif %}
                    </div>
                {% endfor %}
                <button type="submit" class="btn btn-primary btn-block">回答を送信する</button>
            </form>
        </div>
    </div>
</div>
</body>
</html>
