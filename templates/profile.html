<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« - AREChat</title>
    <link rel="stylesheet" href="/static/arechat-futuristic.css">
    <link rel="stylesheet" href="/static/profile.css">
    <style>
        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        #hamburger-menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            width: 50px;
            height: 50px;
            background: rgba(0, 242, 254, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid #667eea;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #hamburger-menu-btn:hover {
            background: rgba(0, 242, 254, 0.3);
            box-shadow: 0 0 20px #667eea;
            transform: scale(1.1);
        }
        .hamburger-line {
            width: 25px;
            height: 3px;
            background: #667eea;
            border-radius: 2px;
            transition: all 0.3s;
            box-shadow: 0 0 5px #667eea;
        }
        #table-of-contents {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-right: 2px solid #667eea;
            padding: 2rem;
            z-index: 9998;
            transition: left 0.3s ease;
            overflow-y: auto;
        }
        #table-of-contents.open {
            left: 0;
            box-shadow: 0 0 50px rgba(102, 126, 234, 0.3);
        }
        #table-of-contents h2 {
            color: #667eea;
            margin-bottom: 2rem;
            font-size: 1.5rem;
        }
        #table-of-contents ul {
            list-style: none;
            padding: 0;
        }
        #table-of-contents li {
            margin: 1rem 0;
        }
        #table-of-contents a {
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem;
            border-radius: 8px;
            transition: all 0.3s;
        }
        #table-of-contents a:hover {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <button id="hamburger-menu-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>

    <!-- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <aside id="table-of-contents">
        <h2 class="arechat-logo">AREChat</h2>
        <ul>
            <li><a href="/chat">ğŸ’¬ AIãƒãƒ£ãƒƒãƒˆ</a></li>
            <li><a href="/old-chat">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ </a></li>
            <li><a href="/features">âœ¨ æ©Ÿèƒ½ä¸€è¦§</a></li>
            <li><a href="/weather">ğŸŒ¤ï¸ å¤©æ°—æƒ…å ±</a></li>
            <li><a href="/train">ğŸšƒ é›»è»Šæƒ…å ±</a></li>
            <li><a href="/games.html">ğŸ® ã‚²ãƒ¼ãƒ ã‚»ãƒ³ã‚¿ãƒ¼</a></li>
            <li><a href="/logout">ğŸ”’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></li>
        </ul>
    </aside>

    <div class="profile-container">
        <div class="profile-header">
            <div class="cover-image-wrapper">
                <img id="coverImage" src="/static/uploads/default_bg.png" alt="ã‚«ãƒãƒ¼ç”»åƒ">
                <button class="edit-cover-btn" onclick="selectCoverImage()">ğŸ“·</button>
            </div>
            
            <div class="avatar-wrapper">
                <img id="avatarImage" src="/static/uploads/default_avatar.png" alt="ã‚¢ãƒã‚¿ãƒ¼">
                <button class="edit-avatar-btn" onclick="selectAvatarImage()">ğŸ“·</button>
            </div>
        </div>

        <div class="profile-body">
            <h2 id="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</h2>
            <p class="status-message" id="statusMessage">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>
            
            <div class="profile-stats">
                <div class="stat-item">
                    <span class="stat-value" id="friendCount">0</span>
                    <span class="stat-label">å‹é”</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="roomCount">0</span>
                    <span class="stat-label">ã‚°ãƒ«ãƒ¼ãƒ—</span>
                </div>
            </div>

            <div class="profile-info">
                <h3>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±</h3>
                <div class="info-item">
                    <label>è‡ªå·±ç´¹ä»‹</label>
                    <p id="bio">è‡ªå·±ç´¹ä»‹æ–‡ãŒã‚ã‚Šã¾ã›ã‚“</p>
                </div>
                <div class="info-item">
                    <label>èª•ç”Ÿæ—¥</label>
                    <p id="birthday">æœªè¨­å®š</p>
                </div>
                <div class="info-item">
                    <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <p id="email">æœªè¨­å®š</p>
                </div>
            </div>

            <div class="profile-actions">
                <button class="btn btn-primary" onclick="editProfile()">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†</button>
                <button class="btn btn-outline" onclick="showPrivacySettings()">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</button>
                <button class="btn btn-outline" onclick="shareLocation()">ä½ç½®æƒ…å ±ã‚’å…±æœ‰</button>
            </div>
        </div>

        <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div class="modal" id="editModal" style="display: none;">
            <div class="modal-content">
                <h3>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†</h3>
                <form id="editForm">
                    <div class="form-group">
                        <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>
                        <input type="text" id="editUsername" required>
                    </div>
                    <div class="form-group">
                        <label>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>
                        <input type="text" id="editStatusMessage">
                    </div>
                    <div class="form-group">
                        <label>è‡ªå·±ç´¹ä»‹</label>
                        <textarea id="editBio" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>èª•ç”Ÿæ—¥</label>
                        <input type="date" id="editBirthday">
                    </div>
                    <div class="form-group">
                        <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                        <input type="email" id="editEmail">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
        <div class="modal" id="privacyModal" style="display: none;">
            <div class="modal-content">
                <h3>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</h3>
                <div class="privacy-options">
                    <div class="privacy-item">
                        <label>ã‚¿ã‚¤ãƒ”ãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤º</label>
                        <input type="checkbox" id="showTyping">
                    </div>
                    <div class="privacy-item">
                        <label>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¡¨ç¤º</label>
                        <input type="checkbox" id="showOnlineStatus">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closePrivacyModal()">é–‰ã˜ã‚‹</button>
                    <button class="btn btn-primary" onclick="savePrivacySettings()">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="uploadAvatar(this)">
    <input type="file" id="coverInput" accept="image/*" style="display: none;" onchange="uploadCover(this)">

    <script>
        // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼
        document.getElementById('hamburger-menu-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('table-of-contents').classList.toggle('open');
        });

        document.body.addEventListener('click', (e) => {
            const toc = document.getElementById('table-of-contents');
            if (toc.classList.contains('open') && !toc.contains(e.target)) {
                toc.classList.remove('open');
            }
        });
    </script>
    <script src="/static/profile.js"></script>
</body>
</html>
